@model List<E_Commerce.Models.ProductReview>

@{
    ViewData["Title"] = "Product Reviews";
}

<h2>Product Reviews</h2>

@if (Model != null && Model.Count > 0)
{
    <div class="reviews-container">
        @foreach (var review in Model)
        {
            <div class="review-item" style="border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px;">
                <div class="review-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <div>
                        <strong style="font-size: 1.1em;">@(review.User != null ? $"{review.User.FirstName} {review.User.LastName}" : "Anonymous")</strong>
                        <div style="color: #666; font-size: 0.9em;">@review.CreatedAt.ToString("MMM dd, yyyy")</div>
                    </div>
                </div>
                
                <div class="review-rating" style="margin-bottom: 10px;">
                    <span style="font-size: 1.2em;">@string.Join("", Enumerable.Range(1, review.Rating).Select(x => "⭐"))</span>
                    <span style="color: #666; margin-left: 10px;">(@review.Rating/5)</span>
                </div>
                
                <div class="review-comment" style="margin: 10px 0; color: #333;">
                    <p>@review.Comment</p>
                </div>
            </div>
        }
    </div>
}
else
{
    <p style="color: #999; font-style: italic;">No reviews yet. Be the first to share your thoughts!</p>
}

<div style="margin-top: 20px;">
    <a asp-action="Create" asp-route-productId="@ViewBag.ProductId" class="btn btn-primary">Add Your Review</a>
</div>
